{"_path":"/configuration/advanced","_dir":"configuration","_draft":false,"_partial":false,"_locale":"","title":"Advanced","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"advanced-configuration"},"children":[{"type":"text","value":"Advanced configuration"}]},{"type":"element","tag":"h2","props":{"id":"cors"},"children":[{"type":"text","value":"CORS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"VIEWTUBE_CORS_ORIGIN"}]},{"type":"text","value":" environment variable specifies the domains that are allowed to access the resources served by ViewTube.\nFor example, if you set VIEWTUBE_CORS_ORIGIN to "},{"type":"element","tag":"a","props":{"href":"http://example.com","rel":["nofollow"]},"children":[{"type":"text","value":"http://example.com"}]},{"type":"text","value":", only requests from "},{"type":"element","tag":"a","props":{"href":"http://example.com","rel":["nofollow"]},"children":[{"type":"text","value":"http://example.com"}]},{"type":"text","value":" will be allowed to access the api of your ViewTube instance."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, CORS is disabled. In Production, it is recommended to set VIEWTUBE_CORS_ORIGIN to the domain that you are accessing your instance from.\nRead more about CORS here: "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS","rel":["nofollow"]},"children":[{"type":"text","value":"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"}]}]},{"type":"element","tag":"h2","props":{"id":"redis-configuration"},"children":[{"type":"text","value":"Redis configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a file called "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"redis.conf"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-conf","code":"# redis.conf\n\nmaxmemory 4GB # Set the maximum memory Redis can use\nmaxmemory-policy allkeys-lru # Set the eviction policy (Read more here https://redis.io/docs/latest/operate/rs/databases/memory-performance/eviction-policy/)\n","language":"conf","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# redis.conf\n\nmaxmemory 4GB # Set the maximum memory Redis can use\nmaxmemory-policy allkeys-lru # Set the eviction policy (Read more here https://redis.io/docs/latest/operate/rs/databases/memory-performance/eviction-policy/)\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make the following changes to your docker-compose file."}]},{"type":"element","tag":"pre","props":{"className":"language-yml shiki shiki-themes github-dark github-light","code":"# docker-compose.yml\n\nredis:\n  ...\n  volumes:\n    ...\n    - ./config/redis.conf:/redis.conf # Add the redis.conf file to the container\n  command: [\"redis-server\", \"/redis.conf\"] # Start Redis with the custom configuration\n  ...\n","language":"yml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"# docker-compose.yml\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"redis"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"  ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"  volumes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"    ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"./config/redis.conf:/redis.conf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":" # Add the redis.conf file to the container\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"  command"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"\"redis-server\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"\"/redis.conf\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"# Start Redis with the custom configuration\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"  ...\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"rate-limiting"},"children":[{"type":"text","value":"Rate limiting"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"YouTube rate-limits and blocks IPs sometimes, if they detect too many requests from the same IP. There are a few ways to circumvent this."}]},{"type":"element","tag":"h2","props":{"id":"use-cookies-from-a-real-account"},"children":[{"type":"text","value":"Use cookies from a real account"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can provide your own cookies to circumvent this issue."}]},{"type":"element","tag":"h3","props":{"id":"youtube-cookie"},"children":[{"type":"text","value":"YouTube cookie"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Navigate to YouTube in a web browser"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Log in, preferrably with a separate account you don't use often"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Open up the dev tools console"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Type "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"document.cookie"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Copy the entire response into the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"VIEWTUBE_YOUTUBE_COOKIE"}]},{"type":"text","value":" environment variable"}]}]},{"type":"element","tag":"h2","props":{"id":"proxy"},"children":[{"type":"text","value":"Proxy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Another way to circumvent Google's rate-limiting is to use an external proxy. ViewTube already proxies all requests through the server it's running on, but you can also use an external proxy."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Set the proxy URL using the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"VIEWTUBE_PROXY_URL"}]},{"type":"text","value":" environment variable."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"cors","depth":2,"text":"CORS"},{"id":"redis-configuration","depth":2,"text":"Redis configuration"},{"id":"rate-limiting","depth":2,"text":"Rate limiting"},{"id":"use-cookies-from-a-real-account","depth":2,"text":"Use cookies from a real account","children":[{"id":"youtube-cookie","depth":3,"text":"YouTube cookie"}]},{"id":"proxy","depth":2,"text":"Proxy"}]}},"_type":"markdown","_id":"content:3.configuration:2.advanced.md","_source":"content","_file":"3.configuration/2.advanced.md","_extension":"md"}